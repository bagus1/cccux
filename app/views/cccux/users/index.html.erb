<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
  <h1>User Management</h1>
  <%= link_to "New User", cccux.new_user_path, 
      style: "background-color: #007bff; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px;" %>
</div>

<div style="background-color: white; border: 1px solid #dee2e6; border-radius: 8px; overflow: hidden;">
  <table style="width: 100%; border-collapse: collapse;">
    <thead style="background-color: #f8f9fa;">
      <tr>
        <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #dee2e6;">Email</th>
        <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #dee2e6;">Name</th>
        <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #dee2e6;">Roles</th>
        <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #dee2e6;">Status</th>
        <th style="padding: 1rem; text-align: center; border-bottom: 1px solid #dee2e6;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr style="border-bottom: 1px solid #f1f3f4;">
          <td style="padding: 1rem;"><%= user.email %></td>
          <td style="padding: 1rem;"><%= "#{user.first_name} #{user.last_name}".strip %></td>
          <td style="padding: 1rem;">
            <% if user.roles.any? %>
              <% user.roles.each do |role| %>
                <span style="background-color: #e7f3ff; color: #0066cc; padding: 0.1rem 0.3rem; border-radius: 3px; font-size: 0.75rem; margin-right: 0.25rem;">
                  <%= role.name %>
                </span>
              <% end %>
            <% else %>
              <span style="color: #6c757d; font-style: italic;">No roles</span>
            <% end %>
          </td>
          <td style="padding: 1rem;">
            <span style="background-color: <%= user.active? ? '#d4edda' : '#f8d7da' %>; color: <%= user.active? ? '#155724' : '#721c24' %>; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.875rem;">
              <%= user.active? ? 'Active' : 'Inactive' %>
            </span>
          </td>
          <td style="padding: 1rem; text-align: center;">
            <div style="display: flex; gap: 0.5rem; justify-content: center;">
              <%= link_to "View", cccux.user_path(user), 
                  style: "color: #007bff; text-decoration: none; font-size: 0.9rem;" %>
              <%= link_to "Edit", cccux.edit_user_path(user), 
                  style: "color: #28a745; text-decoration: none; font-size: 0.9rem;" %>
              <%= link_to "Delete", cccux.user_path(user), data: { "turbo-method": :delete, "turbo-confirm": "Are you sure?" },
                  style: "color: #dc3545; text-decoration: none; font-size: 0.9rem;" %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
